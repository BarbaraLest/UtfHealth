var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=SchoolOperations;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativePaper=require("react-native-paper");var _styles=_interopRequireDefault(require("./../components/styles"));var _MaterialIcons=_interopRequireDefault(require("react-native-vector-icons/MaterialIcons"));var _axios=_interopRequireDefault(require("axios"));var _asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage"));var _jsxFileName="C:\\Users\\barba\\Documents\\TDS 2020.2\\ProjetoFinal\\Projeto\\UtfHealth\\src\\Screens\\Student\\medical history\\SchoolOperations.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function SchoolOperations(_ref){var navigation=_ref.navigation,previus=_ref.previus;var _useState=(0,_react.useState)({schedules:"Não",routine:"Não",pedagogicalSupport:"Não"}),_useState2=(0,_slicedToArray2.default)(_useState,2),school=_useState2[0],setSchool=_useState2[1];var _useState3=(0,_react.useState)(" "),_useState4=(0,_slicedToArray2.default)(_useState3,2),observations=_useState4[0],setObservations=_useState4[1];function createSchoolHistory(){var id;return _regenerator.default.async(function createSchoolHistory$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(_asyncStorage.default.getItem('@UtfApi:idStudent'));case 2:id=_context.sent;_axios.default.post("http://10.0.2.2:3000/schoolHistory",{"idStudent":id,"schedules":school.schedules,"routine":school.routine,"pedagogicalSupport":school.pedagogicalSupport,"observation":observations}).then(function(response){console.log(response.data);createSuccessAlert();}).catch(function(error){console.log(error);createUnsuccessAlert();});case 4:case"end":return _context.stop();}}},null,null,null,Promise);}var createSuccessAlert=function createSuccessAlert(){return _reactNative.Alert.alert("Parabéns!","Seu histórico pedagógico foi criado com sucesso.",[{text:"Ok",onPress:function onPress(){return navigation.navigate('Home');}}]);};var createUnsuccessAlert=function createUnsuccessAlert(){return _reactNative.Alert.alert("Ops!","Não criar seu histórico. Verifique suas informações e tente novamente.",[{text:"Ok",onPress:function onPress(){return navigation.navigate('Home');}}]);};var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),checkedSchool1=_React$useState2[0],setCheckedSchool1=_React$useState2[1];var school1Callback=(0,_react.useCallback)(function(){setCheckedSchool1(!checkedSchool1);},[checkedSchool1]);var _React$useState3=_react.default.useState(false),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),checkedSchool2=_React$useState4[0],setCheckedSchool2=_React$useState4[1];var school2Callback=(0,_react.useCallback)(function(){setCheckedSchool2(!checkedSchool2);},[checkedSchool2]);var _React$useState5=_react.default.useState(false),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),checkedSchool3=_React$useState6[0],setCheckedSchool3=_React$useState6[1];var school3Callback=(0,_react.useCallback)(function(){setCheckedSchool3(!checkedSchool3);},[checkedSchool3]);var schoolIdCallback=(0,_react.useCallback)(function(schoolType,id){if(id==1){setSchool((0,_extends2.default)({},school,{schedules:schoolType}));}if(id==2){setSchool((0,_extends2.default)({},school,{routine:schoolType}));}if(id==3){setSchool((0,_extends2.default)({},school,{pedagogicalSupport:schoolType}));}},[school]);return _react.default.createElement(_reactNativePaper.Provider,{theme:_styles.default.theme,__self:this,__source:{fileName:_jsxFileName,lineNumber:114,columnNumber:9}},_react.default.createElement(_reactNative.TouchableWithoutFeedback,{onPress:_reactNative.Keyboard.dismiss,__self:this,__source:{fileName:_jsxFileName,lineNumber:115,columnNumber:13}},_react.default.createElement(_reactNative.View,{style:_styles.default.background,__self:this,__source:{fileName:_jsxFileName,lineNumber:116,columnNumber:17}},_react.default.createElement(_reactNativePaper.Appbar.Header,{style:{backgroundColor:"#FF8A80"},__self:this,__source:{fileName:_jsxFileName,lineNumber:117,columnNumber:21}},_react.default.createElement(_reactNativePaper.Appbar.BackAction,{onPress:navigation.goBack,color:'#404040',__self:this,__source:{fileName:_jsxFileName,lineNumber:118,columnNumber:25}}),_react.default.createElement(_reactNativePaper.Appbar.Content,{title:"Hist\xF3rico pedag\xF3gico",color:'#404040',__self:this,__source:{fileName:_jsxFileName,lineNumber:119,columnNumber:25}})),_react.default.createElement(_reactNative.View,{style:_styles.default.componentsView,__self:this,__source:{fileName:_jsxFileName,lineNumber:122,columnNumber:21}},_react.default.createElement(_reactNative.View,{style:{flex:3,justifyContent:'space-evenly'},__self:this,__source:{fileName:_jsxFileName,lineNumber:123,columnNumber:25}},_react.default.createElement(_reactNative.View,{style:{flexDirection:'row',alignItems:'center',justifyContent:'space-between'},__self:this,__source:{fileName:_jsxFileName,lineNumber:124,columnNumber:29}},_react.default.createElement(_reactNative.Text,{style:_styles.default.textDentalOperations,__self:this,__source:{fileName:_jsxFileName,lineNumber:125,columnNumber:33}},"Voc\xEA tem dificuldades para organizar seus hor\xE1rios?"),_react.default.createElement(_reactNativePaper.RadioButton,{value:"first",status:checkedSchool1?'checked':'unchecked',onPress:function onPress(){school1Callback(),schoolIdCallback('Tem dificuldades para organizar seus horários',1);},__self:this,__source:{fileName:_jsxFileName,lineNumber:126,columnNumber:33}})),_react.default.createElement(_reactNative.View,{style:{flexDirection:'row',alignItems:'center',justifyContent:'space-between'},__self:this,__source:{fileName:_jsxFileName,lineNumber:132,columnNumber:29}},_react.default.createElement(_reactNative.Text,{style:_styles.default.textDentalOperations,__self:this,__source:{fileName:_jsxFileName,lineNumber:133,columnNumber:33}},"Voc\xEA tem dificuldade em seguir rotinas?"),_react.default.createElement(_reactNativePaper.RadioButton,{value:"first",status:checkedSchool2?'checked':'unchecked',onPress:function onPress(){school2Callback(),schoolIdCallback('tem dificuldade em seguir rotinas',2);},__self:this,__source:{fileName:_jsxFileName,lineNumber:134,columnNumber:33}})),_react.default.createElement(_reactNative.View,{style:{flexDirection:'row',alignItems:'center',justifyContent:'space-between'},__self:this,__source:{fileName:_jsxFileName,lineNumber:140,columnNumber:29}},_react.default.createElement(_reactNative.Text,{style:_styles.default.textDentalOperations,__self:this,__source:{fileName:_jsxFileName,lineNumber:141,columnNumber:33}},"Voc\xEA j\xE1 fez acompanhamento pedagogico antes?"),_react.default.createElement(_reactNativePaper.RadioButton,{value:"first",status:checkedSchool3?'checked':'unchecked',onPress:function onPress(){school3Callback(),schoolIdCallback('Já fez acompanhamento pedagogico',3);},__self:this,__source:{fileName:_jsxFileName,lineNumber:142,columnNumber:33}})),_react.default.createElement(_reactNativePaper.TextInput,{label:"Observa\xE7\xF5es",mode:"flat",placeholderTextColor:"#c85b53",style:_styles.default.textInput,underlineColor:"#c85b53",value:observations,onChangeText:function onChangeText(observations){return setObservations(observations);},multiline:true,numberOfLines:4,dense:true,left:_react.default.createElement(_reactNativePaper.TextInput.Icon,{name:"rename-box",color:"#ffbdaf",__self:this,__source:{fileName:_jsxFileName,lineNumber:159,columnNumber:39}}),__self:this,__source:{fileName:_jsxFileName,lineNumber:148,columnNumber:29}})),_react.default.createElement(_reactNative.View,{style:_styles.default.buttonsView,__self:this,__source:{fileName:_jsxFileName,lineNumber:162,columnNumber:25}},_react.default.createElement(_reactNativePaper.FAB,{style:_styles.default.buttonNewAcc,label:"Cancelar",onPress:navigation.goBack,__self:this,__source:{fileName:_jsxFileName,lineNumber:163,columnNumber:29}}),_react.default.createElement(_reactNativePaper.FAB,{style:_styles.default.buttonNewAcc,label:"Salvar",onPress:function onPress(){return createSchoolHistory();},__self:this,__source:{fileName:_jsxFileName,lineNumber:168,columnNumber:29}}))))));}